<%- include('partials/header') %>
<section class="machine-edit">
  <h2>Machine <%= machine.code %> â€” <%= machine.model %> - <%= machine.location %></h2>
  <form method="post" action="/machine/<%= machine._id %>/save" class="machine-form">
    <table class="ing-table">
      <tr><th>Ingredient</th><th>Quantity</th></tr>
      <% machine.ingredients.forEach(ing => { %>
        <tr>
          <td><%= ing.name %></td>
          <td>
            <% 
  const manualInput = ['8OZ Cups', '10OZ Cups', '10OZ cups', 'Water Jugs']; 
  const isManual = manualInput.includes(ing.name);
%>

<% if (isManual) { %>
  <input 
    type="number" 
    step="0.1" 
    min="0" 
    name="ing_<%= ing.name %>" 
    value="<%= ing.quantity && ing.quantity !== 0 ? ing.quantity : '' %>" 
    placeholder="Enter amount">
<% } else { %>
  <select name="ing_<%= ing.name %>">
    <option value="" <%= !ing.quantity ? 'selected' : '' %>>Select</option>
    <% quantities.forEach(q => { %>
      <option value="<%= q %>" <%= ing.quantity === q ? 'selected' : '' %>><%= q %></option>
    <% }) %>
  </select>
<% } %>


          </td>
        </tr>
      <% }) %>
    </table>
    <div class="actions">
      <button class="btn" type="submit">Save</button>
      <a class="btn" href="/dashboard">Back</a>
    </div>
  </form>
</section>
<%- include('partials/footer') %>
